# CURRENT.md
# 当前阶段说明（会频繁更新，以此为最高优先级）

## 阶段名称
Phase 1：后端骨架 + 核心链路打通（Backend MVP）

## 阶段目标（本阶段只做这些）
在“可用优先”的前提下，完成以下 5 条：

1. FastAPI 后端可启动，提供 `/health` 或 `/ping`
2. MySQL + SQLAlchemy + Alembic 可用（可迁移、可回滚）
3. 文档上传 → 解析 → 分段（chunks）→ 入库 的完整流程可跑通
4. 基于 chunks 建立 FAISS 索引，并可执行基础检索（topK）
5. 提供最小 RAG 问答接口：问题 → 检索 → 拼接上下文 → 调用 LLM → 返回

> 注意：本阶段允许“功能简陋”，但不允许“假实现”。

## 本阶段交付接口（建议至少这些）
- GET  `/health`
- POST `/docs/upload`
- POST `/index/rebuild`（或 `/index/build`）
- POST `/search`（仅检索，便于调试）
- POST `/chat`（RAG 问答）

## 本阶段数据最小集（允许先简后全）
- documents：文档元信息
- chunks：分段文本与元数据
- （可选）indexes：索引版本/路径/维度

## 本阶段禁止事项（非常重要）
在 Phase 1 禁止做：
- 复杂个性化策略（画像可以先不做，或只留数据结构/占位）
- 测验难度自适应的完整闭环（Phase 2 再做）
- 性能优化/高并发设计/缓存体系
- 大规模重构目录结构
- 同时推进多个大模块（必须纵向切片：一次打通一条链路）

## 完成标准（满足才进入下一阶段）
当且仅当以下条件全部满足，Phase 1 完成：

- 上述接口均可用，并提供可复现的调用示例（curl 或 swagger 截图也行）
- 上传一份资料后：可入库 chunks、可建索引、可检索命中、可问答返回
- 服务重启后：数据仍在；索引要么可直接加载，要么可一键重建
- 出错时返回明确错误信息（不静默失败）

## 下一阶段预告（仅提示，不在本阶段实现）
Phase 2 将引入：学习记录 + 最小可用画像 + 测验生成 + 难度控制 + 过难回调