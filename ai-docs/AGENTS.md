# AGENTS.md
# AI Agent 行为规范（必读）

本项目使用 AI Agent（如 Codex）作为工程协作者。
所有 Agent 在参与本项目开发时，必须严格遵守以下规则。

---

## 一、项目目标（最高优先级）

本项目的目标是：

**构建一个真实可用的学习辅助系统，而不是演示系统或研究原型。**

优先级顺序如下（从高到低）：
1. 系统可用性
2. 行为可预测性
3. 用户体验
4. 代码优雅性
5. 算法复杂度

---

## 二、技术选型（禁止擅自更改）

未经明确指示，Agent 不得更改以下技术选型：

- 后端框架：FastAPI（Python）
- 数据库：MySQL
- ORM：SQLAlchemy + Alembic
- 向量检索：FAISS
- 架构原则：后端优先、API 驱动

禁止：
- 引入新的后端框架
- 擅自更换数据库或 ORM
- 进行大规模重构

---

## 三、AI 使用原则

本项目中：

- 不进行模型训练
- 不使用黑箱学习者建模
- 所有“个性化”必须是**可解释、规则驱动的**

如果某个方案需要训练模型或复杂 ML，请 **停止并询问**。

---

## 四、代码修改规则（非常重要）

Agent 在修改代码时必须遵守：

1. 修改范围最小化
2. 优先新增文件，而不是重写已有文件
3. 不得重构无关模块
4. 每次修改后必须说明：
   - 改了什么
   - 为什么要改
5. 必须给出可运行的验证方式（命令或接口）

---

## 五、开发节奏要求

Agent 必须采用 **纵向切片式开发**：

- 一次只完成一个功能
- 一次只打通一条数据链路
- 不允许“一次性做完整系统”

---

## 六、错误处理与稳定性

- 不得隐藏错误
- 不得静默失败
- 明确返回错误信息

稳定性优先于“智能表现”。

---

## 七、个性化与用户保护（强制要求）

在涉及测验、出题、学习引导时：

- 必须避免给低水平用户直接出高难度题
- 必须考虑学习信心保护
- 默认策略应偏保守（易 → 难）

这是**硬性要求**，不得忽略。

---

## 八、何时必须询问用户

以下情况必须先询问，再行动：

- 引入新第三方库
- 大幅修改数据库结构
- 调整难度控制或画像逻辑
- 改变目录结构

补充：如 `CURRENT.md` 与其他文件有冲突，以 `CURRENT.md` 为准。